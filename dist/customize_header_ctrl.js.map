{"version":3,"sources":["../src/customize_header_ctrl.js"],"names":["PanelCtrl","_","panelDefaults","tvMode","pluginPanel","dashboardTitle","actionButtons","cycleViewButton","datePicker","timeRangeZoomButton","refreshButton","kioskMode","disableEscInKioskMode","CustomizeHeaderCtrl","$scope","$injector","$routeParams","$window","contextSrv","datasourceSrv","variableSrv","defaults","panel","events","on","onInitEditMode","bind","currentPanel","$on","$event","next","current","Mousetrap","console","log","render","addEditorTab","templateUrl"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,e,kBAAAA,S;;AACFC,O;;;;;;;;;;;;;;;;;;;;;AAEDC,mB,GAAgB;AACpBC,gBAAS;AACPC,uBAAa,KADN;AAEPC,0BAAgB,KAFT;AAGPC,yBAAe,KAHR;AAIPC,2BAAiB,KAJV;AAKPC,sBAAY,IALL;AAMPC,+BAAqB,IANd;AAOPC,yBAAe;AAPR,SADW;AAUpBC,mBAAW;AACTP,uBAAa,KADJ;AAETC,0BAAgB,KAFP;AAGTC,yBAAe,KAHN;AAITC,2BAAiB,KAJR;AAKTC,sBAAY,IALH;AAMTC,+BAAqB,IANZ;AAOTC,yBAAe;AAPN,SAVS;AAmBpBE,+BAAuB;AAnBH,O;;qCAqBTC,mB;;;AAGX,qCAAYC,MAAZ,EAAoBC,SAApB,EAA+BC,YAA/B,EAA6CC,OAA7C,EAAsDC,UAAtD,EAAkEC,aAAlE,EAAiFC,WAAjF,EAA8F;AAAA;;AAAA,gJACtFN,MADsF,EAC9EC,SAD8E;;AAE5Fd,YAAEoB,QAAF,CAAW,MAAKC,KAAhB,EAAuBpB,aAAvB;AACA,gBAAKqB,MAAL,CAAYC,EAAZ,CAAe,gBAAf,EAAiC,MAAKC,cAAL,CAAoBC,IAApB,OAAjC;AACA,cAAIC,eAAe,MAAKL,KAAxB;AACAR,iBAAOc,GAAP,CAAW,wBAAX,EAAqC,UAASC,MAAT,EAAiBC,IAAjB,EAAuBC,OAAvB,EAAgC;AACnE,gBAAIf,aAAa,OAAb,KAAyBW,aAAaf,qBAA1C,EAAgE;AAC9DK,sBAAQe,SAAR,CAAkBN,IAAlB,CAAuB,KAAvB,EAA8B,YAAW;AACvCO,wBAAQC,GAAR,CAAY,sDAAZ;AACD,eAFD;AAGD;AACF,WAND;;AAL4F;AAc7F;;;;wCAEa;AACZ,iBAAKC,MAAL;AACD;;;uCAEY;AACX,mBAAO,KAAKb,KAAL,CAAWnB,MAAX,CAAkBE,cAAlB,IAAoC,KAAKiB,KAAL,CAAWnB,MAAX,CAAkBG,aAAtD,IAAuE,KAAKgB,KAAL,CAAWnB,MAAX,CAAkBI,eAAzF,IACP,KAAKe,KAAL,CAAWnB,MAAX,CAAkBK,UADX,IACyB,KAAKc,KAAL,CAAWnB,MAAX,CAAkBM,mBAD3C,IACkE,KAAKa,KAAL,CAAWnB,MAAX,CAAkBO,aADpF,IAEP,KAAKY,KAAL,CAAWX,SAAX,CAAqBN,cAFd,IAEgC,KAAKiB,KAAL,CAAWX,SAAX,CAAqBL,aAFrD,IAEsE,KAAKgB,KAAL,CAAWX,SAAX,CAAqBJ,eAF3F,IAGP,KAAKe,KAAL,CAAWX,SAAX,CAAqBH,UAHd,IAG4B,KAAKc,KAAL,CAAWX,SAAX,CAAqBF,mBAHjD,IAGwE,KAAKa,KAAL,CAAWX,SAAX,CAAqBD,aAH7F,IAG8G,KAHrH;AAKD;;;2CAEgB;AACf,iBAAK0B,YAAL,CAAkB,kBAAlB,EAAsC,8DAAtC,EAAsG,CAAtG;AACD;;;;QAjCsCpC,S;;;;AAA5Ba,yB,CACJwB,W,GAAc,a","file":"customize_header_ctrl.js","sourcesContent":["import { PanelCtrl } from 'app/plugins/sdk';\nimport _ from 'lodash';\n\nconst panelDefaults = {\n  tvMode : {\n    pluginPanel: false,\n    dashboardTitle: false,\n    actionButtons: false,\n    cycleViewButton: false,\n    datePicker: true,\n    timeRangeZoomButton: true,\n    refreshButton: true\n  },\n  kioskMode: {\n    pluginPanel: false,\n    dashboardTitle: false,\n    actionButtons: false,\n    cycleViewButton: false,\n    datePicker: true,\n    timeRangeZoomButton: true,\n    refreshButton: true\n  },\n  disableEscInKioskMode: true\n}\nexport class CustomizeHeaderCtrl extends PanelCtrl {\n  static templateUrl = 'module.html';\n\n  constructor($scope, $injector, $routeParams, $window, contextSrv, datasourceSrv, variableSrv) {\n    super($scope, $injector);\n    _.defaults(this.panel, panelDefaults);\n    this.events.on('init-edit-mode', this.onInitEditMode.bind(this));\n    var currentPanel = this.panel;\n    $scope.$on('$locationChangeSuccess', function($event, next, current) { \n      if ($routeParams['kiosk'] && currentPanel.disableEscInKioskMode){\n        $window.Mousetrap.bind('esc', function() { \n          console.log(\"Mode change by ESC key is disabled in panel settings\"); \n        });\n      } \n    });\n\n    \n  }\n\n  updatePanel() {\n    this.render();\n  }\n\n  showNavBar() {\n    return this.panel.tvMode.dashboardTitle || this.panel.tvMode.actionButtons || this.panel.tvMode.cycleViewButton ||\n    this.panel.tvMode.datePicker || this.panel.tvMode.timeRangeZoomButton || this.panel.tvMode.refreshButton ||\n    this.panel.kioskMode.dashboardTitle || this.panel.kioskMode.actionButtons || this.panel.kioskMode.cycleViewButton ||\n    this.panel.kioskMode.datePicker || this.panel.kioskMode.timeRangeZoomButton || this.panel.kioskMode.refreshButton || false;\n          \n  }\n\n  onInitEditMode() {\n    this.addEditorTab('Customize Header', 'public/plugins/grafana-customize-header/partials/editor.html', 2);\n  }\n}\n"]}