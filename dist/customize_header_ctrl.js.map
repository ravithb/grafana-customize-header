{"version":3,"sources":["../src/customize_header_ctrl.js"],"names":["PanelCtrl","_","panelDefaults","tvMode","pluginPanel","dashboardTitle","actionButtons","cycleViewButton","datePicker","timeRangeZoomButton","refreshButton","kioskMode","CustomizeHeaderCtrl","$scope","$injector","$routeParams","$window","contextSrv","datasourceSrv","variableSrv","defaults","panel","events","on","onInitEditMode","bind","$on","$event","next","current","Mousetrap","console","log","unbind","render","addEditorTab","templateUrl"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,e,kBAAAA,S;;AACFC,O;;;;;;;;;;;;;;;;;;;;;AAEDC,mB,GAAgB;AACpBC,gBAAS;AACPC,uBAAa,KADN;AAEPC,0BAAgB,KAFT;AAGPC,yBAAe,KAHR;AAIPC,2BAAiB,KAJV;AAKPC,sBAAY,IALL;AAMPC,+BAAqB,IANd;AAOPC,yBAAe;AAPR,SADW;AAUpBC,mBAAW;AACTP,uBAAa,KADJ;AAETC,0BAAgB,KAFP;AAGTC,yBAAe,KAHN;AAITC,2BAAiB,KAJR;AAKTC,sBAAY,IALH;AAMTC,+BAAqB,IANZ;AAOTC,yBAAe;AAPN;AAVS,O;;qCAoBTE,mB;;;AAGX,qCAAYC,MAAZ,EAAoBC,SAApB,EAA+BC,YAA/B,EAA6CC,OAA7C,EAAsDC,UAAtD,EAAkEC,aAAlE,EAAiFC,WAAjF,EAA8F;AAAA;;AAAA,gJACtFN,MADsF,EAC9EC,SAD8E;;AAE5Fb,YAAEmB,QAAF,CAAW,MAAKC,KAAhB,EAAuBnB,aAAvB;AACA,gBAAKoB,MAAL,CAAYC,EAAZ,CAAe,gBAAf,EAAiC,MAAKC,cAAL,CAAoBC,IAApB,OAAjC;;AAEAZ,iBAAOa,GAAP,CAAW,wBAAX,EAAqC,UAASC,MAAT,EAAiBC,IAAjB,EAAuBC,OAAvB,EAAgC;AACnE,gBAAGd,aAAa,OAAb,CAAH,EAAyB;AACvBC,sBAAQc,SAAR,CAAkBL,IAAlB,CAAuB,KAAvB,EAA8B,YAAW;AACvCM,wBAAQC,GAAR,CAAY,oCAAZ;AACD,eAFD;AAGD,aAJD,MAIM;AACJhB,sBAAQc,SAAR,CAAkBG,MAAlB,CAAyB,KAAzB;AACD;AACF,WARD;;AAL4F;AAgB7F;;;;wCAEa;AACZ,iBAAKC,MAAL;AACD;;;uCAEY;AACX,mBAAO,KAAKb,KAAL,CAAWlB,MAAX,CAAkBE,cAAlB,IAAoC,KAAKgB,KAAL,CAAWlB,MAAX,CAAkBG,aAAtD,IAAuE,KAAKe,KAAL,CAAWlB,MAAX,CAAkBI,eAAzF,IACP,KAAKc,KAAL,CAAWlB,MAAX,CAAkBK,UADX,IACyB,KAAKa,KAAL,CAAWlB,MAAX,CAAkBM,mBAD3C,IACkE,KAAKY,KAAL,CAAWlB,MAAX,CAAkBO,aADpF,IAEP,KAAKW,KAAL,CAAWV,SAAX,CAAqBN,cAFd,IAEgC,KAAKgB,KAAL,CAAWV,SAAX,CAAqBL,aAFrD,IAEsE,KAAKe,KAAL,CAAWV,SAAX,CAAqBJ,eAF3F,IAGP,KAAKc,KAAL,CAAWV,SAAX,CAAqBH,UAHd,IAG4B,KAAKa,KAAL,CAAWV,SAAX,CAAqBF,mBAHjD,IAGwE,KAAKY,KAAL,CAAWV,SAAX,CAAqBD,aAH7F,IAG8G,KAHrH;AAKD;;;2CAEgB;AACf,iBAAKyB,YAAL,CAAkB,kBAAlB,EAAsC,8DAAtC,EAAsG,CAAtG;AACD;;;;QAnCsCnC,S;;;;AAA5BY,yB,CACJwB,W,GAAc,a","file":"customize_header_ctrl.js","sourcesContent":["import { PanelCtrl } from 'app/plugins/sdk';\nimport _ from 'lodash';\n\nconst panelDefaults = {\n  tvMode : {\n    pluginPanel: false,\n    dashboardTitle: false,\n    actionButtons: false,\n    cycleViewButton: false,\n    datePicker: true,\n    timeRangeZoomButton: true,\n    refreshButton: true\n  },\n  kioskMode: {\n    pluginPanel: false,\n    dashboardTitle: false,\n    actionButtons: false,\n    cycleViewButton: false,\n    datePicker: true,\n    timeRangeZoomButton: true,\n    refreshButton: true\n  }\n}\nexport class CustomizeHeaderCtrl extends PanelCtrl {\n  static templateUrl = 'module.html';\n\n  constructor($scope, $injector, $routeParams, $window, contextSrv, datasourceSrv, variableSrv) {\n    super($scope, $injector);\n    _.defaults(this.panel, panelDefaults);\n    this.events.on('init-edit-mode', this.onInitEditMode.bind(this));\n    \n    $scope.$on('$locationChangeSuccess', function($event, next, current) { \n      if($routeParams['kiosk']){\n        $window.Mousetrap.bind('esc', function() { \n          console.log(\"Mode change by ESC key is disabled\"); \n        });\n      }else {\n        $window.Mousetrap.unbind('esc');\n      }\n    });\n\n    \n  }\n\n  updatePanel() {\n    this.render();\n  }\n\n  showNavBar() {\n    return this.panel.tvMode.dashboardTitle || this.panel.tvMode.actionButtons || this.panel.tvMode.cycleViewButton ||\n    this.panel.tvMode.datePicker || this.panel.tvMode.timeRangeZoomButton || this.panel.tvMode.refreshButton ||\n    this.panel.kioskMode.dashboardTitle || this.panel.kioskMode.actionButtons || this.panel.kioskMode.cycleViewButton ||\n    this.panel.kioskMode.datePicker || this.panel.kioskMode.timeRangeZoomButton || this.panel.kioskMode.refreshButton || false;\n          \n  }\n\n  onInitEditMode() {\n    this.addEditorTab('Customize Header', 'public/plugins/grafana-customize-header/partials/editor.html', 2);\n  }\n}\n"]}