{"version":3,"sources":["../src/customize_header_ctrl.js"],"names":["PanelCtrl","_","renderer","panelDefaults","tvMode","pluginPanel","dashboardTitle","actionButtons","cycleViewButton","datePicker","timeRangeZoomButton","refreshButton","kioskMode","CustomizeHeaderCtrl","$scope","$injector","$routeParams","$window","contextSrv","datasourceSrv","variableSrv","disableEscKey","defaults","panel","events","on","onInitEditMode","bind","$on","$event","next","current","Mousetrap","console","log","unbind","render","addEditorTab","templateUrl"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,e,kBAAAA,S;;AACFC,O;;AACAC,c;;;;;;;;;;;;;;;;;;;;;AAIDC,mB,GAAgB;AACpBC,gBAAS;AACPC,uBAAa,KADN;AAEPC,0BAAgB,KAFT;AAGPC,yBAAe,KAHR;AAIPC,2BAAiB,KAJV;AAKPC,sBAAY,IALL;AAMPC,+BAAqB,IANd;AAOPC,yBAAe;AAPR,SADW;AAUpBC,mBAAW;AACTP,uBAAa,KADJ;AAETC,0BAAgB,KAFP;AAGTC,yBAAe,KAHN;AAITC,2BAAiB,KAJR;AAKTC,sBAAY,IALH;AAMTC,+BAAqB,IANZ;AAOTC,yBAAe;AAPN;AAVS,O;;qCAoBTE,mB;;;AAIX,qCAAYC,MAAZ,EAAoBC,SAApB,EAA+BC,YAA/B,EAA6CC,OAA7C,EAAsDC,UAAtD,EAAkEC,aAAlE,EAAiFC,WAAjF,EAA8F;AAAA;;AAAA,gJACtFN,MADsF,EAC9EC,SAD8E;;AAAA,gBAF9FM,aAE8F,GAF9E,KAE8E;;AAE5FpB,YAAEqB,QAAF,CAAW,MAAKC,KAAhB,EAAuBpB,aAAvB;AACA,gBAAKqB,MAAL,CAAYC,EAAZ,CAAe,gBAAf,EAAiC,MAAKC,cAAL,CAAoBC,IAApB,OAAjC;;AAEAb,iBAAOc,GAAP,CAAW,wBAAX,EAAqC,UAASC,MAAT,EAAiBC,IAAjB,EAAuBC,OAAvB,EAAgC;AACnE,gBAAGf,aAAa,OAAb,CAAH,EAAyB;AACvBC,sBAAQe,SAAR,CAAkBL,IAAlB,CAAuB,KAAvB,EAA8B,YAAW;AACvCM,wBAAQC,GAAR,CAAY,oCAAZ;AACD,eAFD;AAGD,aAJD,MAIM;AACJjB,sBAAQe,SAAR,CAAkBG,MAAlB,CAAyB,KAAzB;AACD;AACF,WARD;;AAL4F;AAgB7F;;;;wCAEa;AACZ,iBAAKC,MAAL;AACD;;;uCAEY;AACX,mBAAO,KAAKb,KAAL,CAAWnB,MAAX,CAAkBE,cAAlB,IAAoC,KAAKiB,KAAL,CAAWnB,MAAX,CAAkBG,aAAtD,IAAuE,KAAKgB,KAAL,CAAWnB,MAAX,CAAkBI,eAAzF,IACP,KAAKe,KAAL,CAAWnB,MAAX,CAAkBK,UADX,IACyB,KAAKc,KAAL,CAAWnB,MAAX,CAAkBM,mBAD3C,IACkE,KAAKa,KAAL,CAAWnB,MAAX,CAAkBO,aADpF,IAEP,KAAKY,KAAL,CAAWX,SAAX,CAAqBN,cAFd,IAEgC,KAAKiB,KAAL,CAAWX,SAAX,CAAqBL,aAFrD,IAEsE,KAAKgB,KAAL,CAAWX,SAAX,CAAqBJ,eAF3F,IAGP,KAAKe,KAAL,CAAWX,SAAX,CAAqBH,UAHd,IAG4B,KAAKc,KAAL,CAAWX,SAAX,CAAqBF,mBAHjD,IAGwE,KAAKa,KAAL,CAAWX,SAAX,CAAqBD,aAH7F,IAG8G,KAHrH;AAKD;;;2CAEgB;AACf,iBAAK0B,YAAL,CAAkB,kBAAlB,EAAsC,8DAAtC,EAAsG,CAAtG;AACD;;;;QApCsCrC,S;;;;AAA5Ba,yB,CACJyB,W,GAAc,a","file":"customize_header_ctrl.js","sourcesContent":["import { PanelCtrl } from 'app/plugins/sdk';\nimport _ from 'lodash';\nimport renderer from './renderer';\n\nvar Mousetrap;\n\nconst panelDefaults = {\n  tvMode : {\n    pluginPanel: false,\n    dashboardTitle: false,\n    actionButtons: false,\n    cycleViewButton: false,\n    datePicker: true,\n    timeRangeZoomButton: true,\n    refreshButton: true\n  },\n  kioskMode: {\n    pluginPanel: false,\n    dashboardTitle: false,\n    actionButtons: false,\n    cycleViewButton: false,\n    datePicker: true,\n    timeRangeZoomButton: true,\n    refreshButton: true\n  }\n}\nexport class CustomizeHeaderCtrl extends PanelCtrl {\n  static templateUrl = 'module.html';\n  disableEscKey = false;\n\n  constructor($scope, $injector, $routeParams, $window, contextSrv, datasourceSrv, variableSrv) {\n    super($scope, $injector);\n    _.defaults(this.panel, panelDefaults);\n    this.events.on('init-edit-mode', this.onInitEditMode.bind(this));\n    \n    $scope.$on('$locationChangeSuccess', function($event, next, current) { \n      if($routeParams['kiosk']){\n        $window.Mousetrap.bind('esc', function() { \n          console.log(\"Mode change by ESC key is disabled\"); \n        });\n      }else {\n        $window.Mousetrap.unbind('esc');\n      }\n    });\n\n    \n  }\n\n  updatePanel() {\n    this.render();\n  }\n\n  showNavBar() {\n    return this.panel.tvMode.dashboardTitle || this.panel.tvMode.actionButtons || this.panel.tvMode.cycleViewButton ||\n    this.panel.tvMode.datePicker || this.panel.tvMode.timeRangeZoomButton || this.panel.tvMode.refreshButton ||\n    this.panel.kioskMode.dashboardTitle || this.panel.kioskMode.actionButtons || this.panel.kioskMode.cycleViewButton ||\n    this.panel.kioskMode.datePicker || this.panel.kioskMode.timeRangeZoomButton || this.panel.kioskMode.refreshButton || false;\n          \n  }\n\n  onInitEditMode() {\n    this.addEditorTab('Customize Header', 'public/plugins/grafana-customize-header/partials/editor.html', 2);\n  }\n\n  // /* eslint class-methods-use-this: 0 */\n  // link(scope, elem, attrs, ctrl) {\n  //   renderer(scope, elem, attrs, ctrl);\n  // }\n}"]}